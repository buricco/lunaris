/*
 * SPDX-License-Identifier: NCSA
 * 
 * banner(1) - make posters
 *             (as according to System V Release 2 documentation)
 *
 * Copyright 2020 S. V. Nickolas.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal with the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimers.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimers in the 
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the names of the authors nor the names of contributors may be
 *    used to endorse or promote products derived from this Software without
 *    specific prior written permission.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE CONTRIBUTORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR
 * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
 * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS WITH THE SOFTWARE.
 */

/*
 * Although the font was reverse-engineered from System V's banner(1) by 
 * "black box" means, the spacing of characters is not identical to the font 
 * used in the System V version.  Additionally, only the printable characters 
 * of standard US-ASCII (0x20-0x7E) have character glyphs in this font.
 * 
 * This should be legitimate in the United States because a bitmap font is not
 * legally copyrightable here.
 */

#include <stdio.h>
#include <string.h>

unsigned char font[768]={
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x38, 0x38, 0x38, 0x10, 0x00, 0x38, 0x38, 0x00,
 0xee, 0xee, 0x44, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x28, 0x28, 0xfe, 0x28, 0xfe, 0x28, 0x28, 0x00,
 0x7c, 0x92, 0x90, 0x7c, 0x12, 0x92, 0x7c, 0x00,
 0xe2, 0xa4, 0xe8, 0x10, 0x2e, 0x4a, 0x8e, 0x00,
 0x30, 0x48, 0x30, 0x70, 0x8a, 0x84, 0x72, 0x00,
 0x38, 0x38, 0x10, 0x20, 0x00, 0x00, 0x00, 0x00,
 0x0c, 0x10, 0x20, 0x20, 0x20, 0x10, 0x0c, 0x00,
 0x30, 0x08, 0x04, 0x04, 0x04, 0x08, 0x30, 0x00,
 0x00, 0x44, 0x28, 0xfe, 0x28, 0x44, 0x00, 0x00,
 0x00, 0x10, 0x10, 0x7c, 0x10, 0x10, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x1c, 0x1c, 0x08, 0x10, 0x00,
 0x00, 0x00, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x38, 0x38,
 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x00,
 0x38, 0x44, 0x82, 0x82, 0x82, 0x44, 0x38, 0x00,
 0x10, 0x30, 0x50, 0x10, 0x10, 0x10, 0x7c, 0x00,
 0x7c, 0x82, 0x02, 0x7c, 0x80, 0x80, 0xfe, 0x00,
 0x7c, 0x82, 0x02, 0x7c, 0x02, 0x82, 0x7c, 0x00,
 0x80, 0x84, 0x84, 0x84, 0xfe, 0x04, 0x04, 0x00,
 0xfe, 0x80, 0x80, 0xfc, 0x02, 0x82, 0x7c, 0x00,
 0x7c, 0x82, 0x80, 0xfc, 0x82, 0x82, 0x7c, 0x00,
 0xfe, 0x84, 0x08, 0x10, 0x20, 0x20, 0x20, 0x00,
 0x7c, 0x82, 0x82, 0x7c, 0x82, 0x82, 0x7c, 0x00,
 0x7c, 0x82, 0x82, 0x7e, 0x02, 0x82, 0x7c, 0x00,
 0x10, 0x38, 0x10, 0x00, 0x10, 0x38, 0x10, 0x00,
 0x38, 0x38, 0x00, 0x38, 0x38, 0x10, 0x20, 0x00,
 0x04, 0x08, 0x10, 0x20, 0x10, 0x08, 0x04, 0x00,
 0x00, 0x00, 0x7c, 0x00, 0x7c, 0x00, 0x00, 0x00,
 0x20, 0x10, 0x08, 0x04, 0x08, 0x10, 0x20, 0x00,
 0x7c, 0x82, 0x02, 0x1c, 0x10, 0x00, 0x10, 0x00,
 0x7c, 0x82, 0xba, 0xba, 0xbc, 0x80, 0x7c, 0x00,
 0x10, 0x28, 0x44, 0x82, 0xfe, 0x82, 0x82, 0x00,
 0xfc, 0x82, 0x82, 0xfc, 0x82, 0x82, 0xfc, 0x00,
 0x7c, 0x82, 0x80, 0x80, 0x80, 0x82, 0x7c, 0x00,
 0xfc, 0x82, 0x82, 0x82, 0x82, 0x82, 0xfc, 0x00,
 0xfe, 0x80, 0x80, 0xf8, 0x80, 0x80, 0xfe, 0x00,
 0xfe, 0x80, 0x80, 0xf8, 0x80, 0x80, 0x80, 0x00,
 0x7c, 0x82, 0x80, 0x9e, 0x82, 0x82, 0x7c, 0x00,
 0x82, 0x82, 0x82, 0xfe, 0x82, 0x82, 0x82, 0x00,
 0x38, 0x10, 0x10, 0x10, 0x10, 0x10, 0x38, 0x00,
 0x02, 0x02, 0x02, 0x02, 0x82, 0x82, 0x7c, 0x00,
 0x84, 0x88, 0x90, 0xe0, 0x90, 0x88, 0x84, 0x00,
 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0xfe, 0x00,
 0x82, 0xc6, 0xaa, 0x92, 0x82, 0x82, 0x82, 0x00,
 0x82, 0xc2, 0xa2, 0x92, 0x8a, 0x86, 0x82, 0x00,
 0xfe, 0x82, 0x82, 0x82, 0x82, 0x82, 0xfe, 0x00,
 0xfc, 0x82, 0x82, 0xfc, 0x80, 0x80, 0x80, 0x00,
 0x7c, 0x82, 0x82, 0x82, 0x8a, 0x84, 0x7a, 0x00,
 0xfc, 0x82, 0x82, 0xfc, 0x88, 0x84, 0x82, 0x00,
 0x7c, 0x82, 0x80, 0x7c, 0x02, 0x82, 0x7c, 0x00,
 0xfe, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00,
 0x82, 0x82, 0x82, 0x82, 0x82, 0x82, 0x7c, 0x00,
 0x82, 0x82, 0x82, 0x82, 0x44, 0x28, 0x10, 0x00,
 0x82, 0x92, 0x92, 0x92, 0x92, 0x92, 0x6c, 0x00,
 0x82, 0x44, 0x28, 0x10, 0x28, 0x44, 0x82, 0x00,
 0x82, 0x44, 0x28, 0x10, 0x10, 0x10, 0x10, 0x00,
 0xfe, 0x04, 0x08, 0x10, 0x20, 0x40, 0xfe, 0x00,
 0x7c, 0x40, 0x40, 0x40, 0x40, 0x40, 0x7c, 0x00,
 0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x00,
 0x7c, 0x04, 0x04, 0x04, 0x04, 0x04, 0x7c, 0x00,
 0x08, 0x14, 0x22, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe,
 0x38, 0x38, 0x10, 0x08, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x18, 0x24, 0x42, 0x7e, 0x42, 0x42, 0x00,
 0x00, 0x7c, 0x42, 0x7c, 0x42, 0x42, 0x7c, 0x00,
 0x00, 0x3c, 0x42, 0x40, 0x40, 0x42, 0x3c, 0x00,
 0x00, 0x7c, 0x42, 0x42, 0x42, 0x42, 0x7c, 0x00,
 0x00, 0x7e, 0x40, 0x7c, 0x40, 0x40, 0x7e, 0x00,
 0x00, 0x7e, 0x40, 0x7c, 0x40, 0x40, 0x40, 0x00,
 0x00, 0x3c, 0x42, 0x40, 0x4e, 0x42, 0x3c, 0x00,
 0x00, 0x42, 0x42, 0x7e, 0x42, 0x42, 0x42, 0x00,
 0x00, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x00,
 0x00, 0x02, 0x02, 0x02, 0x02, 0x42, 0x3c, 0x00,
 0x00, 0x42, 0x44, 0x78, 0x48, 0x44, 0x42, 0x00,
 0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0x7e, 0x00,
 0x00, 0x42, 0x66, 0x5a, 0x42, 0x42, 0x42, 0x00,
 0x00, 0x42, 0x62, 0x52, 0x4a, 0x46, 0x42, 0x00,
 0x00, 0x3c, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x00,
 0x00, 0x7c, 0x42, 0x42, 0x7c, 0x40, 0x40, 0x00,
 0x00, 0x3c, 0x42, 0x42, 0x4a, 0x44, 0x3a, 0x00,
 0x00, 0x7c, 0x42, 0x42, 0x7c, 0x44, 0x42, 0x00,
 0x00, 0x3c, 0x40, 0x3c, 0x02, 0x42, 0x3c, 0x00,
 0x00, 0x7c, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00,
 0x00, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3c, 0x00,
 0x00, 0x42, 0x42, 0x42, 0x42, 0x24, 0x18, 0x00,
 0x00, 0x42, 0x42, 0x42, 0x5a, 0x66, 0x42, 0x00,
 0x00, 0x42, 0x24, 0x18, 0x18, 0x24, 0x42, 0x00,
 0x00, 0x22, 0x14, 0x08, 0x08, 0x08, 0x08, 0x00,
 0x00, 0x7e, 0x04, 0x08, 0x10, 0x20, 0x7e, 0x00,
 0x1c, 0x20, 0x20, 0x60, 0x20, 0x20, 0x1c, 0x00,
 0x10, 0x10, 0x10, 0x00, 0x10, 0x10, 0x10, 0x00,
 0x38, 0x04, 0x04, 0x06, 0x04, 0x04, 0x38, 0x00,
 0x60, 0x92, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

void genlin (char *str)
{
 unsigned char line[8][81];
 int t,u;
 
 for (t=0; t<8; t++) memset(line[t],0,81);
 for (t=0; (str[t] && t<10); t++)
 {
  for (u=0; u<8; u++)
  {
   int s,c,o;
   
   s=t<<3;
   c=str[t];
   if ((c<0x20)||(c>0x7E)) c=0x20;
   c-=32;
   
   o=c<<3;
   line[u][s+0]=(font[o+u]&0x80)?'#':' ';
   line[u][s+1]=(font[o+u]&0x40)?'#':' ';
   line[u][s+2]=(font[o+u]&0x20)?'#':' ';
   line[u][s+3]=(font[o+u]&0x10)?'#':' ';
   line[u][s+4]=(font[o+u]&0x08)?'#':' ';
   line[u][s+5]=(font[o+u]&0x04)?'#':' ';
   line[u][s+6]=(font[o+u]&0x02)?'#':' ';
   line[u][s+7]=(font[o+u]&0x01)?'#':' ';
  }
 }
 
 for (t=0; t<8; t++) printf ("%s\n", line[t]);
}

int main (int argc, char **argv)
{
 int t;
 
 if (argc==1)
 {
  fprintf (stderr, "%s: usage: %s \"up to 10-char arg string\" ...\n",
           argv[0], argv[0]);
  return 1;
 }
 
 for (t=1; t<argc; t++) genlin(argv[t]);
 
 return 0;
}
